"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[552],{3954:(e,r,n)=>{n.d(r,{y:()=>l});var t=n(6540),i=n(9794);function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,r)||function(e,r){if(e){if("string"==typeof e)return a(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}var l=function(){var e=o((0,t.useState)("tree_1"),2),r=e[0],n=e[1],a=o((0,t.useState)("Tree 1"),2),l=a[0],c=a[1],s=o((0,t.useState)([]),2),u=s[0],d=s[1],f=o((0,t.useState)([]),2),p=f[0],y=f[1],m=o((0,t.useState)(new Map),2),h=m[0],v=m[1];return(0,t.useEffect)((function(){var e,r=localStorage.getItem("dialogueTree");if(r){var t=JSON.parse(r),o=(0,i.T)(t);o&&(n(o.id),c(o.name),d(o.dialogues),y(null!==(e=o.skillTests)&&void 0!==e?e:[]),v(o.nodeCoordinates))}}),[]),(0,t.useEffect)((function(){var e={id:r,name:l,dialogues:u,skillTests:p,nodeCoordinates:Array.from(h.entries())},n=JSON.stringify(e);localStorage.setItem("dialogueTree",n)}),[r,l,u,p,h]),{dialogueTreeID:r,dialogueTreeName:l,dialogues:u,skillTests:p,nodeCoordinates:h,setDialogues:d,setSkillTests:y,setDialogueTreeID:n,setDialogueTreeName:c,setDialogueCoordinates:v}}},6310:(e,r,n)=>{n.d(r,{A:()=>l});var t=n(1601),i=n.n(t),o=n(6314),a=n.n(o)()(i());a.push([e.id,".history-item {\n    display: flex;\n    flex-direction: row;\n    gap: 8px;\n\n    margin-bottom: 8px;\n}\n.history-item--centered {\n    margin-left: 24px;\n}\n\n.history-item__character {\n    font-weight: 700;\n    text-shadow: 1px 1px 4px black;\n}\n\n.history-item__text {\n    white-space: pre-wrap;\n}",""]);const l=a},6640:(e,r,n)=>{n.d(r,{Y:()=>i});var t=n(3628),i=[{label:"Dialogue Tree",route:"/rpg_tools/dialogue_tree",iconType:t.AT.GRAPH4},{label:"Characters",route:"/rpg_tools/characters",iconType:t.AT.GROUP},{label:"Preview",route:"/rpg_tools/tree_preview",iconType:t.AT.MENU_BOOK}]},7684:(e,r,n)=>{n.r(r),n.d(r,{default:()=>U});var t=n(6540),i=n(5072),o=n.n(i),a=n(7825),l=n.n(a),c=n(7659),s=n.n(c),u=n(5056),d=n.n(u),f=n(540),p=n.n(f),y=n(1113),m=n.n(y),h=n(8825),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=s().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p(),o()(h.A,v),h.A&&h.A.locals&&h.A.locals;var g=n(6980),b=n(3954),x=n(6640),w=n(4861),A=n(4848),S=function(e){var r=e.choice,n=e.currentConditions,t=e.onClick,i=T(n,r.prerequisiteIDs);return(0,A.jsx)(w.$,{onClick:function(){return t(r.nextNodeID,"> "+r.name,r.addToHistory,r.conditionOutcomes)},buttonTheme:w.O.Default,disabled:!i,children:r.name})},T=function(e,r){return 0===r.length||r.every((function(r){return!!e.find((function(e){return e.id===r}))}))};function j(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return _(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}var I=function(e){return{id:e.id,name:e.shortDescription,nextNodeID:Number(e.nextDialogueID),prerequisiteIDs:e.conditionID?[e.conditionID]:[],conditionOutcomes:e.conditionOutcomes,addToHistory:e.addToHistory}},O=n(6310),D={};D.styleTagTransform=m(),D.setAttributes=d(),D.insert=s().bind(null,"head"),D.domAPI=l(),D.insertStyleElement=p(),o()(O.A,D),O.A&&O.A.locals&&O.A.locals;var C=function(e){var r=e.history,n=r.description,t=r.character,i=r.isChoice,o=t?{color:t.nameColor}:void 0,a="history-item"+(i?" history-item--centered":"");return(0,A.jsxs)("div",{className:a,children:[t?(0,A.jsx)("div",{className:"history-item__character",style:o,children:"[".concat(null==t?void 0:t.name,"]")}):null,(0,A.jsx)("div",{className:"history-item__text",children:n})]})};function k(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=o.call(n)).done)&&(l.push(t.value),l.length!==r);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,r)||P(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,r){if(e){if("string"==typeof e)return E(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,r):void 0}}function E(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}const U=function(){var e=(0,b.y)(),r=e.dialogues,n=e.skillTests,i=N((0,t.useState)([]),2),o=i[0],a=i[1],l=N((0,t.useState)([]),2),c=l[0],s=l[1],u=N((0,t.useState)([]),2),d=u[0],f=u[1],p=(0,t.useRef)(null);(0,t.useEffect)((function(){if(!(o.length>0)){var e=r.find((function(e){return 1===e.id}));if(e){var n=e.character?{name:e.character.name,nameColor:e.character.nameColor}:null;a([].concat(k(o),[{id:crypto.randomUUID(),description:e.description,character:n,isChoice:!1}])),s(k(e.choices.map(I)))}}}),[r,o]);var y=function(e,t,i,l){var c=function(e,r){for(var n=j(e),t=function(e){if("adding"===r[e].addingOrRemoving)return n.push({id:r[e].id,name:r[e].conditionName}),0;var t=n.findIndex((function(n){return n.id===r[e].id}));if(-1===t)return 0;n.splice(t,1)},i=0;i<r.length;i++)t(i);return n}(d,l),u=function(e,r,n,t){var i=e.find((function(e){return e.id===n}));if(i){var o=t.reduce((function(e,r){return e[r.id]=r,e}),{}),a=i.hiddenInfo.filter((function(e){return e.conditionIDs.every((function(e){return o[e.id]}))}));return{description:i.description+"\n"+a.map((function(e){return e.description+"\n"})),choices:i.choices.map(I),character:i.character?{name:i.character.name,nameColor:i.character.nameColor}:{name:"Unknown",nameColor:"#FCFEFF"}}}var l=r.find((function(e){return e.id===n}));if(l){var c=l.difficulties.map((function(e){var r;return{id:String(e.id),name:"Threshold: "+e.threshold,prerequisiteIDs:[],nextNodeID:null!==(r=l.nextDialogueID)&&void 0!==r?r:-1,conditionOutcomes:j(e.conditionOutcomes),addToHistory:!0}}));return{description:l.name+" | "+l.skillID,choices:c,character:{name:"Skill Test",nameColor:"#FCFEFF"}}}return null}(r,n,e,c);if(u){var p={id:crypto.randomUUID(),description:t,character:null,isChoice:!0},y={id:crypto.randomUUID(),description:u.description,character:u.character,isChoice:!1},m=i?[p,y]:[y];f(c),a([].concat(k(o),m)),s(k(u.choices))}};return(0,t.useEffect)((function(){p.current&&(p.current.scrollTop=p.current.scrollHeight)}),[p,o]),(0,A.jsx)(g.Y,{routes:x.Y,title:"RPG Tools",children:(0,A.jsxs)("div",{className:"tree-preview-page",children:[(0,A.jsx)("h1",{children:"Dialogue Tree Preview"}),(0,A.jsxs)("div",{className:"tree-preview-page__container",children:[(0,A.jsxs)("div",{className:"tree-preview-page__active-conditions",children:[(0,A.jsx)("h3",{children:"Active Conditions"}),d.map((function(e){return(0,A.jsxs)("div",{children:[e.id," : ",e.name]},e.id)}))]}),(0,A.jsxs)("div",{className:"tree-preview-page__content",children:[(0,A.jsx)("div",{ref:p,className:"tree-preview-page__history",children:o.map((function(e){return(0,A.jsx)(C,{history:e},e.id)}))}),(0,A.jsx)("div",{className:"tree-preview-page__choices",children:c.map((function(e){return(0,A.jsx)(S,{choice:e,currentConditions:d,onClick:y},e.id)}))})]})]})]})})}},8825:(e,r,n)=>{n.d(r,{A:()=>l});var t=n(1601),i=n.n(t),o=n(6314),a=n.n(o)()(i());a.push([e.id,".tree-preview-page {\n    display: flex;\n    flex-direction: column;\n\n    width: 100%;\n}\n\n.tree-preview-page__container {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n}\n\n.tree-preview-page__active-conditions {\n    display: flex;\n    flex-direction: column;\n\n    flex: 1 1;\n}\n\n.tree-preview-page__content {\n    display: flex;\n    flex-direction: column;\n    flex: 4 1;\n}\n\n.tree-preview-page__history {\n    height: 250px;\n    margin-bottom: 20px;\n    padding: 20px;\n\n    background-color: #3b3b40;\n\n    border-radius: 10px;\n    box-shadow: 1px 1px 4px #1f2028;\n\n    overflow-y: scroll;\n    overflow-x: hidden;\n    scrollbar-width: none;\n}\n\n.tree-preview-page__history::-webkit-scrollbar {\n    display: none;\n}\n\n.tree-preview-page__choices {\n    display: flex;\n    flex-direction: column;\n\n    gap: 8px;\n}\n@media only screen and (max-width: 600px) {\n    .tree-preview-page__container {\n        gap: 20px;\n    }\n\n    .tree-preview-page__content {\n        flex: 1 1 100%;\n    }\n}\n",""]);const l=a},9794:(e,r,n)=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){a(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function a(e,r,n){return(r=function(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{T:()=>l});var l=function(e){if(Array.isArray(e))return null;var r=c(e);if(!r)return null;var n=s(e),t=u(e),i=Array.isArray(e.nodeCoordinates)?new Map(e.nodeCoordinates):new Map;return o(o({},r),{},{dialogues:null!=n?n:[],skillTests:null!=t?t:[],nodeCoordinates:i})},c=function(e){return"string"==typeof e.id&&"string"==typeof e.name?{id:e.id,name:e.name}:null},s=function(e){if(!Array.isArray(e.dialogues))return null;var r=e.dialogues;return r.every((function(e){return!("number"!=typeof e.id||"string"!=typeof e.name||"string"!=typeof e.description||!Array.isArray(e.hiddenInfo)||!Array.isArray(e.choices))}))?r:null},u=function(e){if(!Array.isArray(e.skillTests))return null;var r=e.skillTests;return r.every((function(e){return!("number"!=typeof e.id||"string"!=typeof e.name||"string"!=typeof e.skillID||!Array.isArray(e.difficulties)||"number"!=typeof e.nextDialogueID&&null!==e.nextDialogueID)}))?r:null}}}]);