"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[825],{193:(e,n,t)=>{t.d(n,{I:()=>o});var r=t(6540);function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var o=function(){var e,n,t=(e=(0,r.useState)([]),n=2,function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return i(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=t[0],l=t[1];return(0,r.useEffect)((function(){var e=localStorage.getItem("characters");if(e){var n=JSON.parse(e);l(n)}}),[l]),(0,r.useEffect)((function(){var e=JSON.stringify(o);localStorage.setItem("characters",e)}),[o]),{characters:o,setCharacters:l}}},510:(e,n,t)=>{t.r(n),t.d(n,{default:()=>pn});var r=t(6540),i=t(5072),o=t.n(i),l=t(7825),a=t.n(l),u=t(7659),c=t.n(u),s=t(5056),d=t.n(s),f=t(540),m=t.n(f),y=t(1113),p=t.n(y),h=t(6966),v={};v.styleTagTransform=p(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=m(),o()(h.A,v),h.A&&h.A.locals&&h.A.locals;var b=t(6980),g=t(2395),x=t(934);function j(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return S(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var A=function(e,n,t){var r=function(e,n,r,i){var o,l,a=t.get(e);return{key:String(e),node:e,attributes:{x:null!==(o=null==a?void 0:a.x)&&void 0!==o?o:0,y:null!==(l=null==a?void 0:a.y)&&void 0!==l?l:0,label:n,size:20,color:null!=i?i:"#d6a840",type:"skillTest"===r?"square":void 0}}},i=e.map((function(e){var n;return r(e.id,e.name,"dialogue",null===(n=e.character)||void 0===n?void 0:n.nameColor)})),o=n.map((function(e){return r(e.id,e.name,"skillTest")}));return[].concat(j(i),j(o))},w=function(e,n){var t=[].concat(j(e),j(n)).reduce((function(e,n){return e[n.id]=n.id,e}),{}),r=e.reduce((function(e,n){var r=n.choices.filter((function(e,r){var i=n.choices.findIndex((function(n){return n.nextDialogueID==e.nextDialogueID}))===r;return t[Number(e.nextDialogueID)]&&i})).map((function(e){return{key:n.id+"-"+e.nextDialogueID,source:String(n.id),target:e.nextDialogueID,attributes:{type:"arrow",size:4,undirected:!1}}}));return[].concat(j(e),j(r))}),[]),i=n.filter((function(e){var n;return t[null!==(n=e.nextDialogueID)&&void 0!==n?n:-1]})).map((function(e){return{key:e.id+"-"+e.nextDialogueID,source:String(e.id),target:String(e.nextDialogueID),attributes:{type:"arrow",size:4,undirected:!1}}}));return[].concat(j(r),j(i))};function _(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return O(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var I=function(e){var n=e.dialogues,t=e.skillTests,i=e.nodeCoordinates,o=e.onDialogueClick,l=e.onDialogueMoveFinish,a=_((0,r.useState)(null),2),u=a[0],c=a[1],s=_((0,r.useState)(!1),2),d=s[0],f=s[1],m=(0,g.Bx)(),y=(0,g.Qp)(),p=(0,g.Su)();return m.setSetting("labelColor",{color:"#FCFEFF"}),(0,r.useEffect)((function(){var e={attributes:{name:"Adventure"},options:{allowSelfLoops:!0,multi:!1,type:"directed"},nodes:A(n,t,i),edges:w(n,t)},r=x.DirectedGraph.from(e);p(r)}),[p,n,t,i]),(0,r.useEffect)((function(){y({clickNode:function(e){e.preventSigmaDefault()},downNode:function(e){c(e.node)},mouseup:function(e){if(u){if(d){var n=m.viewportToGraph(e);m.getGraph().setNodeAttribute(u,"x",n.x),m.getGraph().setNodeAttribute(u,"y",n.y),l(Number(u),n.x,n.y),f(!1)}var t=Number(u);o(t),c(null)}},mousedown:function(){m.getCustomBBox()||m.setCustomBBox(m.getBBox())},mousemove:function(e){if(u){f(!0);var n=m.viewportToGraph(e);m.getGraph().setNodeAttribute(u,"x",n.x),m.getGraph().setNodeAttribute(u,"y",n.y),e.preventSigmaDefault(),e.original.preventDefault(),e.original.stopPropagation()}}})}),[y,m,u,d,c,f]),null},k=t(1177),T=t(3954);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){P(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function P(e,n,t){return(n=function(e){var n=function(e){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=D(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var E=t(4861),$=t(5011),R=t(4494),M=t(9794),U=t(6640),H=t(8012),F={};F.styleTagTransform=p(),F.setAttributes=d(),F.insert=c().bind(null,"head"),F.domAPI=a(),F.insertStyleElement=m(),o()(H.A,F),H.A&&H.A.locals&&H.A.locals;var L=t(5111),B=t(7331),G=t(193),z=t(4857),J={};J.styleTagTransform=p(),J.setAttributes=d(),J.insert=c().bind(null,"head"),J.domAPI=a(),J.insertStyleElement=m(),o()(z.A,J),z.A&&z.A.locals&&z.A.locals;var V=t(2030),Y=t(3628),Z=t(4848),q=function(e){var n=e.hiddenInfo,t=e.onEdit,r=e.onDelete;return(0,Z.jsxs)("div",{className:"hidden-info-item",children:[(0,Z.jsx)("div",{className:"hidden-info-item__segment",children:n.conditionIDs.map((function(e){return(0,Z.jsx)("div",{children:e.name},e.id)}))}),(0,Z.jsx)("div",{className:"hidden-info-item__segment",children:n.description}),(0,Z.jsxs)("div",{className:"hidden-info-item__segment--actions",children:[(0,Z.jsx)(E.$,{onClick:t,children:(0,Z.jsx)(V.I,{iconType:Y.AT.PENCIL})}),(0,Z.jsx)(E.$,{onClick:function(){return r(n.id)},buttonTheme:E.O.Delete,children:(0,Z.jsx)(V.I,{iconType:Y.AT.TRASH})})]})]})},K=t(8047),Q={};Q.styleTagTransform=p(),Q.setAttributes=d(),Q.insert=c().bind(null,"head"),Q.domAPI=a(),Q.insertStyleElement=m(),o()(K.A,Q),K.A&&K.A.locals&&K.A.locals;var W=t(4646),X=t(6563);function ee(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||te(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,n){if(e){if("string"==typeof e)return re(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?re(e,n):void 0}}function re(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var ie=function(e){var n,t,i,o=e.hiddenInfoToEdit,l=e.isOpen,a=e.onClose,u=e.onSave,c=ne((0,r.useState)(null!==(n=null==o?void 0:o.id)&&void 0!==n?n:null),2),s=c[0],d=c[1],f=ne((0,r.useState)(null!==(t=null==o?void 0:o.conditionIDs)&&void 0!==t?t:[]),2),m=f[0],y=f[1],p=ne((0,r.useState)(null!==(i=null==o?void 0:o.description)&&void 0!==i?i:null),2),h=p[0],v=p[1],b=ne((0,r.useState)(null),2),g=b[0],x=b[1],j=ne((0,r.useState)(null),2),S=j[0],A=j[1],w=(0,r.useRef)(null);(0,r.useEffect)((function(){var e,n,t;d(null!==(e=null==o?void 0:o.id)&&void 0!==e?e:null),v(null!==(n=null==o?void 0:o.description)&&void 0!==n?n:""),y(null!==(t=null==o?void 0:o.conditionIDs)&&void 0!==t?t:[])}),[o]);var _=m.length<=0||!h;return(0,Z.jsx)(W.a,{title:"Add Hidden Info",isOpen:l,onClose:a,footer:(0,Z.jsx)(E.$,{disabled:_,onClick:function(){if(!(m.length<=0)&&h){var e={id:null!=s?s:crypto.randomUUID(),conditionIDs:m,description:h};u(e),a()}},children:"Save"}),children:(0,Z.jsxs)("div",{className:"add-hidden-info-modal",children:[(0,Z.jsx)(X.r,{children:'This modal allows you to add and edit Hidden Info to your dialogue. Hidden Info shows up when a certain condition exists in the game state. For example, if a character has the "High Perception" condition, then perhaps they get more information on a situation than they otherwise would have received.'}),(0,Z.jsxs)("div",{className:"add-hidden-info-modal__form",children:[(0,Z.jsx)(k.k,{ref:w,placeholder:"Condition ID",value:null!=g?g:"",onChange:function(e){x(null!=e?e:"")}}),(0,Z.jsx)(k.k,{placeholder:"Condition name",value:null!=S?S:"",onChange:function(e){A(null!=e?e:"")}}),(0,Z.jsx)(E.$,{disabled:!(g&&S),onClick:function(){var e;g&&S&&(y([].concat(ee(m),[{id:g,name:S}])),x(null),A(null),null===(e=w.current)||void 0===e||e.focus())},children:"Add condition"})]}),m.map((function(e){return(0,Z.jsxs)("div",{className:"hidden-info-item",children:[(0,Z.jsxs)("div",{className:"hidden-info-item__segment",children:[e.id," | ",e.name]}),(0,Z.jsx)("div",{className:"hidden-info-item__segment--actions",children:(0,Z.jsx)(E.$,{onClick:function(){return n=e.id,r=(t=ee(m)).findIndex((function(e){return e.id===n})),void(-1!==r&&(t.splice(r,1),y(t)));var n,t,r},buttonTheme:E.O.Delete,children:(0,Z.jsx)(V.I,{iconType:Y.AT.TRASH})})})]},e.id)})),(0,Z.jsx)("textarea",{className:"add-hidden-info-modal__description",value:null!=h?h:"",onChange:function(e){var n,t=null!==(n=e.target.value)&&void 0!==n?n:"";v(t)}})]})})},oe=t(2283),le={};le.styleTagTransform=p(),le.setAttributes=d(),le.insert=c().bind(null,"head"),le.domAPI=a(),le.insertStyleElement=m(),o()(oe.A,le),oe.A&&oe.A.locals&&oe.A.locals;var ae=t(7739),ue={};ue.styleTagTransform=p(),ue.setAttributes=d(),ue.insert=c().bind(null,"head"),ue.domAPI=a(),ue.insertStyleElement=m(),o()(ae.A,ue),ae.A&&ae.A.locals&&ae.A.locals;var ce=t(1326);function se(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||fe(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,n){if(e){if("string"==typeof e)return me(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?me(e,n):void 0}}function me(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var ye=[{label:"Adding",value:"adding"},{label:"Removing",value:"removing"}],pe=function(e){var n,t,i,o,l,a=e.choice,u=e.isOpen,c=e.onClose,s=e.onSave,d=de((0,r.useState)(null!==(n=null==a?void 0:a.conditionID)&&void 0!==n?n:null),2),f=d[0],m=d[1],y=de((0,r.useState)(null!==(t=null==a?void 0:a.nextDialogueID)&&void 0!==t?t:null),2),p=y[0],h=y[1],v=de((0,r.useState)(null!==(i=null==a?void 0:a.shortDescription)&&void 0!==i?i:null),2),b=v[0],g=v[1],x=de((0,r.useState)(null!==(o=null==a?void 0:a.conditionOutcomes)&&void 0!==o?o:[]),2),j=x[0],S=x[1],A=de((0,r.useState)(null!==(l=null==a?void 0:a.addToHistory)&&void 0!==l&&l),2),w=A[0],_=A[1],O=de((0,r.useState)(null),2),I=O[0],T=O[1],D=de((0,r.useState)(null),2),C=D[0],N=D[1],P=de((0,r.useState)("adding"),2),$=P[0],R=P[1];(0,r.useEffect)((function(){var e,n,t,r,i;m(null!==(e=null==a?void 0:a.conditionID)&&void 0!==e?e:null),h(null!==(n=null==a?void 0:a.nextDialogueID)&&void 0!==n?n:null),g(null!==(t=null==a?void 0:a.shortDescription)&&void 0!==t?t:null),S(null!==(r=null==a?void 0:a.conditionOutcomes)&&void 0!==r?r:[]),_(null!==(i=null==a?void 0:a.addToHistory)&&void 0!==i&&i)}),[a]);var M=!p||!b,U=(0,Z.jsx)(E.$,{disabled:M,onClick:function(){var e;if(p&&b){var n={id:null!==(e=null==a?void 0:a.id)&&void 0!==e?e:crypto.randomUUID(),conditionID:f,nextDialogueID:p,shortDescription:b,conditionOutcomes:j,addToHistory:w};s(n),m(null),h(null),g(null),S([]),_(!1),c()}},children:"Save"});return(0,Z.jsx)(W.a,{title:"Choice",isOpen:u,onClose:c,footer:U,children:(0,Z.jsxs)("div",{className:"choice-modal",children:[(0,Z.jsxs)("div",{className:"choice-modal__inline-form",children:[(0,Z.jsx)(k.k,{id:"modal-condition-id",label:"Condition ID",value:null!=f?f:"",onChange:function(e){m(null!=e?e:null)}}),(0,Z.jsx)(k.k,{id:"modal-condition-next-dialogue-id",label:"Next dialogue ID",value:null!=p?p:"",onChange:function(e){h(null!=e?e:null)}}),(0,Z.jsx)(ce.O,{id:"modal-condition-next-dialogue-add-history",label:"Add to history",value:w,onChange:function(e){return _(e)}})]}),(0,Z.jsx)(k.k,{id:"modal-condition-short-description",label:"Short description",value:null!=b?b:"",onChange:function(e){g(null!=e?e:null)}}),(0,Z.jsx)("h3",{children:"Condition Outcomes"}),(0,Z.jsxs)("div",{className:"choice-modal__condition-outcome-form",children:[(0,Z.jsx)(B.m,{id:"modal-condition-outcome-add-remove",label:"Add/Remove",options:ye,defaultValue:null!=$?$:"",onOptionSelect:function(e){return R(e)}}),(0,Z.jsx)(k.k,{id:"modal-condition-outcome-id",label:"ID",placeholder:"ID",value:null!=I?I:"",onChange:function(e){T(null!=e?e:null)}}),(0,Z.jsx)(k.k,{id:"modal-condition-outcome-naem",label:"Name",placeholder:"Name",value:null!=C?C:"",onChange:function(e){N(null!=e?e:null)}}),(0,Z.jsx)("div",{className:"choice-modal__condition-outcome-form-button",children:(0,Z.jsx)(E.$,{onClick:function(){if(I&&C&&$){var e=se(j);e.push({id:I,conditionName:C,addingOrRemoving:$}),S(e),R("adding"),T(null),N(null)}},children:"Add"})})]}),(0,Z.jsx)("hr",{className:"divider"}),(0,Z.jsxs)("div",{className:"choice-modal__condition-outcome",children:[(0,Z.jsx)("div",{className:"choice-modal__condition-outcome-header",children:"Adding/Removing"}),(0,Z.jsx)("div",{className:"choice-modal__condition-outcome-header",children:"ID"}),(0,Z.jsx)("div",{className:"choice-modal__condition-outcome-header",children:"Name"}),(0,Z.jsx)("div",{}),j.map((function(e){return(0,Z.jsxs)(r.Fragment,{children:[(0,Z.jsx)("div",{children:e.addingOrRemoving}),(0,Z.jsx)("div",{children:e.id}),(0,Z.jsx)("div",{children:e.conditionName}),(0,Z.jsx)("div",{className:"choice-modal__condition-outcome-actions",children:(0,Z.jsx)(E.$,{buttonTheme:E.O.Delete,onClick:function(){return n=e.id,void S(se(j).filter((function(e){return e.id!==n})));var n},children:(0,Z.jsx)(V.I,{iconType:Y.AT.TRASH})})})]},e.id)}))]})]})})};function he(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||be(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,n){if(e){if("string"==typeof e)return ge(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ge(e,n):void 0}}function ge(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var xe=function(e){var n=e.choices,t=e.onChange,i=ve((0,r.useState)(null),2),o=i[0],l=i[1],a=ve((0,r.useState)(!1),2),u=a[0],c=a[1],s=(0,Z.jsxs)(E.$,{onClick:function(){return c(!0)},children:[(0,Z.jsx)(V.I,{iconType:Y.AT.PLUS}),"Add Choice"]});return(0,Z.jsxs)(L.Z,{title:"Choices",button:s,children:[(0,Z.jsxs)("div",{className:"choices-table",children:[(0,Z.jsx)("div",{className:"choices-table__header",children:"Condition ID"}),(0,Z.jsx)("div",{className:"choices-table__header",children:"Short description"}),(0,Z.jsx)("div",{className:"choices-table__header",children:"Next dialogue ID"}),(0,Z.jsx)("div",{className:"choices-table__header",children:"Outcomes"}),(0,Z.jsx)("div",{className:"choices-table__header",children:"Add to history"}),(0,Z.jsx)("div",{}),n.map((function(e){return(0,Z.jsxs)(r.Fragment,{children:[(0,Z.jsx)("div",{children:e.conditionID}),(0,Z.jsx)("div",{children:e.shortDescription}),(0,Z.jsx)("div",{children:e.nextDialogueID}),(0,Z.jsx)("div",{children:e.conditionOutcomes.map((function(e){return(0,Z.jsx)("div",{children:("adding"===e.addingOrRemoving?"+ ":"- ")+e.id},e.id)}))}),(0,Z.jsx)("div",{children:e.addToHistory?"true":"false"}),(0,Z.jsxs)("div",{className:"choices-table__item--actions",children:[(0,Z.jsx)(E.$,{onClick:function(){l(e),c(!0)},children:(0,Z.jsx)(V.I,{iconType:Y.AT.PENCIL})}),(0,Z.jsx)(E.$,{onClick:function(){return r=e.id,o=(i=he(n)).findIndex((function(e){return e.id===r})),void(-1!==o&&(i.splice(o,1),t(i)));var r,i,o},buttonTheme:E.O.Delete,children:(0,Z.jsx)(V.I,{iconType:Y.AT.TRASH})})]})]},e.id)}))]}),(0,Z.jsx)(pe,{choice:o,isOpen:u,onSave:function(e){var r=he(n),i=r.findIndex((function(n){return n.id===e.id}));-1===i?r.push(e):r[i]=e,t(r)},onClose:function(){l(null),c(!1)}})]})};function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(t),!0).forEach((function(n){we(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function we(e,n,t){return(n=function(e){var n=function(e){if("object"!=je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=je(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==je(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _e(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||Ie(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,n){if(e){if("string"==typeof e)return ke(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ke(e,n):void 0}}function ke(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var Te=function(e){var n=e.dialogue,t=e.onSave,i=e.onDelete,o=Oe((0,r.useState)(!1),2),l=o[0],a=o[1],u=Oe((0,r.useState)(null),2),c=u[0],s=u[1],d=(0,G.I)().characters,f=d.map((function(e){return{label:e.name,value:e.id}}));f.unshift({label:"",value:"default"});var m=function(e){var r=n.hiddenInfo.findIndex((function(n){return n.id===e}));if(-1!==r){var i=_e(n.hiddenInfo);i.splice(r,1),t(Ae(Ae({},n),{},{hiddenInfo:i}))}};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:"dialogue-maker",children:[(0,Z.jsxs)("div",{className:"dialogue-maker__title",children:[(0,Z.jsx)("h2",{children:n.name}),(0,Z.jsxs)(E.$,{buttonTheme:E.O.Delete,onClick:i,children:[(0,Z.jsx)(V.I,{iconType:Y.AT.TRASH}),"Delete dialogue"]})]}),(0,Z.jsxs)("div",{className:"dialogue-maker__form",children:[(0,Z.jsx)(k.k,{id:"dialogue-id",label:"Dialogue ID",value:n.id,readonly:!0}),(0,Z.jsx)(k.k,{id:"dialogue-name",label:"Dialogue name",value:n.name,onChange:function(e){t(Ae(Ae({},n),{},{name:null!=e?e:""}))}}),(0,Z.jsx)(B.m,{id:"character_dropdown",label:"Character",defaultValue:n.character?n.character.id:"default",options:f,onOptionSelect:function(e){var r=d.find((function(n){return n.id===e}));r&&t(Ae(Ae({},n),{},{character:r}))}})]}),(0,Z.jsxs)("div",{className:"dialogue-maker__content",children:[(0,Z.jsxs)(L.Z,{title:"Description",button:(0,Z.jsxs)(E.$,{onClick:function(){return a(!0)},children:[(0,Z.jsx)(V.I,{iconType:Y.AT.PLUS}),"Add hidden info"]}),children:[(0,Z.jsxs)("div",{className:"dialogue-maker__description",children:[(0,Z.jsx)("label",{htmlFor:"dialogue-description",children:"Dialogue description"}),(0,Z.jsx)("textarea",{className:"dialogue-maker__text-area",id:"dialogue-description",value:n.description,onChange:function(e){var r,i=null!==(r=e.target.value)&&void 0!==r?r:"";t(Ae(Ae({},n),{},{description:i}))}})]}),(0,Z.jsxs)("div",{className:"dialogue-maker__description--hidden-info",children:[(0,Z.jsxs)("div",{className:"hidden-info-item",children:[(0,Z.jsx)("div",{className:"hidden-info-item__segment",children:"Conditions"}),(0,Z.jsx)("div",{className:"hidden-info-item__segment",children:"Description"}),(0,Z.jsx)("div",{className:"hidden-info-item__segment"})]}),n.hiddenInfo.map((function(e){return(0,Z.jsx)(q,{hiddenInfo:e,onDelete:m,onEdit:function(){s(e),a(!0)}},e.id)}))]})]}),(0,Z.jsx)(xe,{choices:n.choices,onChange:function(e){t(Ae(Ae({},n),{},{choices:e}))}})]})]}),(0,Z.jsx)(ie,{hiddenInfoToEdit:c,isOpen:l,onClose:function(){a(!1),s(null)},onSave:function(e){var r=_e(n.hiddenInfo),i=n.hiddenInfo.findIndex((function(n){return n.id===e.id}));-1===i?r.push(e):r[i]=e,t(Ae(Ae({},n),{},{hiddenInfo:r}))}})]})};function De(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return Ce(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ce(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var Ne=function(e){var n=e.dialogues,t=e.currentDialogue,r=e.setCurrentDialogue,i=e.setDialogues;return t?(0,Z.jsx)(Te,{dialogue:t,onSave:function(e){var t=De(n),o=n.findIndex((function(n){return n.id===e.id}));-1!==o&&(t[o]=e,r(e),i(t))},onDelete:function(){if(1!==n.length&&t){var e=n.findIndex((function(e){return e.id===t.id}));if(-1!==e){var o=De(n);o.splice(e,1),r(null),i(o)}}}}):null},Pe=t(6793),Ee={};Ee.styleTagTransform=p(),Ee.setAttributes=d(),Ee.insert=c().bind(null,"head"),Ee.domAPI=a(),Ee.insertStyleElement=m(),o()(Pe.A,Ee),Pe.A&&Pe.A.locals&&Pe.A.locals;var $e=t(8014),Re={};function Me(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||He(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||He(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,n){if(e){if("string"==typeof e)return Fe(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fe(e,n):void 0}}function Fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}Re.styleTagTransform=p(),Re.setAttributes=d(),Re.insert=c().bind(null,"head"),Re.domAPI=a(),Re.insertStyleElement=m(),o()($e.A,Re),$e.A&&$e.A.locals&&$e.A.locals;var Le=[{label:"Adding",value:"adding"},{label:"Removing",value:"removing"}],Be=function(e){var n,t,i=e.isOpen,o=e.difficulty,l=e.updateDifficulty,a=e.onClose,u=(0,r.useRef)(null),c=Ue((0,r.useState)(null!==(n=null==o?void 0:o.threshold)&&void 0!==n?n:null),2),s=c[0],d=c[1],f=Ue((0,r.useState)(null!==(t=null==o?void 0:o.conditionOutcomes)&&void 0!==t?t:[]),2),m=f[0],y=f[1],p=Ue((0,r.useState)(null),2),h=p[0],v=p[1],b=Ue((0,r.useState)(null),2),g=b[0],x=b[1],j=Ue((0,r.useState)("adding"),2),S=j[0],A=j[1];(0,r.useEffect)((function(){var e,n;d(null!==(e=null==o?void 0:o.threshold)&&void 0!==e?e:null),y(null!==(n=null==o?void 0:o.conditionOutcomes)&&void 0!==n?n:[])}),[o]);var w=null==s||m.length<1,_=(0,Z.jsx)(E.$,{disabled:w,onClick:function(){null==s||m.length<1||(l({id:null!=o&&o.id?o.id:Math.trunc(Date.now()+Math.random()),threshold:s,conditionOutcomes:m}),v(null),x(null),A("adding"),a())},children:"Save difficulty"});return(0,Z.jsxs)(W.a,{isOpen:i,title:"Difficulty",onClose:a,footer:_,children:[(0,Z.jsxs)(X.r,{children:[(0,Z.jsx)("p",{children:'This modal allows you to add a Difficulty to your Skill Test. A Difficulty has a "Threshold" which represents the value that the character must pass, and a "Condition Outcome" which represents the Game Engine adding or removing a condition from the game state.'}),(0,Z.jsx)("p",{children:'For example, a Skill Test to climb a wall may add an "exhausted" condition to the game state if the character does poorly.'})]}),(0,Z.jsx)("div",{children:(0,Z.jsx)(k.k,{id:"skill-test-difficulty-threshold-modal",placeholder:"Condition threshold",value:null!=s?s:"",onChange:function(e){return d(e?Number(e):null)},numbersOnly:!0})}),(0,Z.jsx)("hr",{className:"divider"}),(0,Z.jsxs)("div",{className:"skill-test-difficulty-modal-outcome__form",children:[(0,Z.jsx)(k.k,{id:"skill-test-difficulty-condition-id",placeholder:"Condition ID",value:null!=h?h:"",onChange:function(e){return v(null!=e?e:null)},ref:u}),(0,Z.jsx)(k.k,{id:"skill-test-difficulty-condition-name",placeholder:"Condition name",value:null!=g?g:"",onChange:function(e){return x(null!=e?e:null)}}),(0,Z.jsx)(B.m,{defaultValue:"adding",options:Le,onOptionSelect:function(e){return A(e)}}),(0,Z.jsx)(E.$,{onClick:function(){var e;h&&g&&(y([].concat(Me(m),[{id:h,conditionName:g,addingOrRemoving:S}])),v(null),x(null),A("adding"),null===(e=u.current)||void 0===e||e.focus())},children:"Add condition outcome"})]}),(0,Z.jsx)("div",{children:m.map((function(e){return(0,Z.jsxs)("div",{className:"skill-test-difficulty-modal__condition-outcome",children:[(0,Z.jsx)("div",{children:e.addingOrRemoving+" : "+e.conditionName+" ("+e.id+")"}),(0,Z.jsx)("div",{children:(0,Z.jsx)(E.$,{onClick:function(){return n=e.id,r=(t=Me(m)).findIndex((function(e){return e.id===n})),void(-1!==r&&(t.splice(r,1),y(t)));var n,t,r},buttonTheme:E.O.Delete,children:(0,Z.jsx)(V.I,{iconType:Y.AT.TRASH})})})]},e.id)}))})]})};function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function ze(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Je(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ze(Object(t),!0).forEach((function(n){Ve(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ze(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ve(e,n,t){return(n=function(e){var n=function(e){if("object"!=Ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=Ge(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ye(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||qe(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,n){if(e){if("string"==typeof e)return Ke(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ke(e,n):void 0}}function Ke(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var Qe=function(e){var n,t=e.currentSkillTest,i=e.onSave,o=e.onDelete,l=Ze((0,r.useState)(!1),2),a=l[0],u=l[1],c=Ze((0,r.useState)(null),2),s=c[0],d=c[1];return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{className:"skill-test-maker__title",children:[(0,Z.jsx)("h2",{children:t.name}),(0,Z.jsxs)(E.$,{buttonTheme:E.O.Delete,onClick:function(){return o()},children:[(0,Z.jsx)(V.I,{iconType:Y.AT.TRASH}),"Delete"]})]}),(0,Z.jsxs)("div",{className:"skill-test-maker__form",children:[(0,Z.jsx)(k.k,{id:"skill-test-id",label:"ID",value:t.id,readonly:!0}),(0,Z.jsx)(k.k,{id:"skill-test-name",label:"Name",value:t.name,onChange:function(e){return e?i(Je(Je({},t),{},{name:e})):null}}),(0,Z.jsx)(k.k,{id:"skill-test-skill-id",label:"Skill ID",value:t.skillID,onChange:function(e){return e?i(Je(Je({},t),{},{skillID:e})):null}}),(0,Z.jsx)(k.k,{id:"skill-test-next-dialogue-id",label:"Next Dialogue ID",value:null!==(n=t.nextDialogueID)&&void 0!==n?n:"",onChange:function(e){return i(Je(Je({},t),{},{nextDialogueID:e?Number(e):null}))},numbersOnly:!0})]}),(0,Z.jsxs)(L.Z,{title:"Difficulties",button:(0,Z.jsxs)(E.$,{onClick:function(){return u(!0)},children:[(0,Z.jsx)(V.I,{iconType:Y.AT.PLUS}),"Add difficulty"]}),children:[(0,Z.jsxs)("div",{className:"skill-test-maker__outcome-item",children:[(0,Z.jsx)("div",{className:"skill-test-maker__outcome-item-child",children:"Threshold"}),(0,Z.jsx)("div",{className:"skill-test-maker__outcome-item-child",children:"Outcomes"}),(0,Z.jsx)("div",{className:"skill-test-maker__outcome-item-child--controls"})]}),t.difficulties.map((function(e){return(0,Z.jsxs)("div",{className:"skill-test-maker__outcome-item",children:[(0,Z.jsx)("div",{className:"skill-test-maker__outcome-item-child",children:e.threshold}),(0,Z.jsx)("div",{className:"skill-test-maker__outcome-item-child",children:e.conditionOutcomes.map((function(e){return(0,Z.jsx)("div",{children:"["+e.addingOrRemoving+" : "+e.conditionName+" ("+e.id+") ]"},e.id)}))}),(0,Z.jsxs)("div",{className:"skill-test-maker__outcome-item-child--controls",children:[(0,Z.jsx)(E.$,{onClick:function(){d(e),u(!0)},children:(0,Z.jsx)(V.I,{iconType:Y.AT.PENCIL})}),(0,Z.jsx)(E.$,{buttonTheme:E.O.Delete,onClick:function(){return n=e.id,o=(r=Ye(t.difficulties)).findIndex((function(e){return e.id===n})),void(-1!==o&&(r.splice(o,1),i(Je(Je({},t),{},{difficulties:r}))));var n,r,o},children:(0,Z.jsx)(V.I,{iconType:Y.AT.TRASH})})]})]},e.id)}))]}),(0,Z.jsx)(Be,{isOpen:a,difficulty:s,updateDifficulty:function(e){var n=Ye(t.difficulties),r=n.findIndex((function(n){return n.id===e.id}));-1===r?n.push(e):n[r]=e,i(Je(Je({},t),{},{difficulties:n}))},onClose:function(){u(!1),d(null)}})]})};function We(e){return function(e){if(Array.isArray(e))return Xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return Xe(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Xe(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var en=function(e){var n=e.skillTests,t=e.currentSkillTest,r=e.setSkillTests,i=e.setCurrentSkillTest;return t?(0,Z.jsx)(Qe,{currentSkillTest:t,onSave:function(e){var t=We(n),o=n.findIndex((function(n){return n.id===e.id}));-1!==o&&(t[o]=e,i(e),r(t))},onDelete:function(){if(1!==n.length&&t){var e=n.findIndex((function(e){return e.id===t.id}));if(-1!==e){var o=We(n);o.splice(e,1),i(null),r(o)}}}}):null},nn=t(1953);function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function rn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rn=function(){return!!e})()}function on(e){return on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},on(e)}function ln(e,n){return ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},ln(e,n)}function an(e){var n=function(e){if("object"!=tn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=tn(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tn(n)?n:n+""}var un=function(e,n,t){var r=n.x,i=n.y,o=n.size,l=n.color,a=1.1*o;e.fillStyle=l,e.fillRect(r-a,i-a,2*a,2*a)},cn={allowInvalidContainer:!0,nodeProgramClasses:{square:function(e){function n(){var e,t,r,i;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return e=function(e,n,t){return n=on(n),function(e,n){if(n&&("object"==tn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rn()?Reflect.construct(n,t||[],on(e).constructor):n.apply(e,t))}(this,n,[].concat(l)),t=e,i=un,(r=an(r="drawHover"))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&ln(e,n)}(n,e),t=n,Object.defineProperty(t,"prototype",{writable:!1}),t;var t}(nn.eb)},defaultEdgeType:"arrow",defaultDrawNodeHover:function(e,n,t){var r=n.x,i=n.y,o=n.size,l=n.color,a=1.1*o;e.beginPath(),e.arc(r,i,a,0,2*Math.PI),e.fillStyle=l,e.fill()}},sn=function(e){var n=e.children;return(0,Z.jsx)(g.hF,{settings:cn,style:{height:"350px",backgroundColor:"#3b3b40",color:"#FCFEFF"},children:n})};function dn(e){return function(e){if(Array.isArray(e))return yn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||mn(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,n){if(e){if("string"==typeof e)return yn(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?yn(e,n):void 0}}function yn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}const pn=function(){var e,n,t,i,o=(0,T.y)(),l=o.dialogueTreeID,a=o.dialogueTreeName,u=o.dialogues,c=o.skillTests,s=o.nodeCoordinates,d=o.setDialogueTreeID,f=o.setDialogueTreeName,m=o.setDialogues,y=o.setSkillTests,p=o.setDialogueCoordinates,h=fn((0,r.useState)(null),2),v=h[0],g=h[1],x=fn((0,r.useState)(null),2),j=x[0],S=x[1],A=function(){d(""),f(""),m([]),y([]),p(new Map)};return(0,Z.jsx)(b.Y,{title:"RPG Tools",routes:U.Y,children:(0,Z.jsxs)("div",{className:"dialogue-tree-maker",children:[(0,Z.jsxs)("div",{className:"dialogue-tree-maker__title",children:[(0,Z.jsx)("h1",{children:"Dialogue Tree Maker"}),l&&(0,Z.jsxs)($.v,{download:l+".json",href:(e={id:l,name:a,dialogues:u,skillTests:c,nodeCoordinates:s},n=N(N({},e),{},{nodeCoordinates:Array.from(e.nodeCoordinates.entries())}),t=JSON.stringify(n,null,4),i=new Blob([t],{type:"application/json"}),URL.createObjectURL(i)),children:[(0,Z.jsx)(V.I,{iconType:Y.AT.DOANLOAD}),"Download tree"]}),(0,Z.jsxs)(E.$,{buttonTheme:E.O.Delete,onClick:A,children:[(0,Z.jsx)(V.I,{iconType:Y.AT.TRASH}),"Delete Tree"]})]}),(0,Z.jsxs)("div",{className:"dialogue-tree-maker__form",children:[(0,Z.jsx)(R.z,{id:"dialogue-tree-upload",name:"Upload Dialogue Tree",onChange:function(e){var n=(0,M.T)(e);n&&(A(),d(n.id),f(n.name),m(n.dialogues),y(n.skillTests),p(n.nodeCoordinates))}}),(0,Z.jsx)(k.k,{id:"dialogue-tree-id",label:"Dialogue tree ID",value:l,onChange:function(e){d(null!=e?e:"")}}),(0,Z.jsx)(k.k,{id:"dialogue-tree-name",label:"Dialogue tree name",value:a,onChange:function(e){f(null!=e?e:"")}})]}),(0,Z.jsxs)("div",{className:"dialogue-tree-maker--content",children:[(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{className:"dialogue-tree-maker__dialogue-tree-title",children:[(0,Z.jsx)("h2",{children:"Dialogue Tree"}),(0,Z.jsxs)(E.$,{onClick:function(){var e=0!==u.length?u[u.length-1].id:0,n={id:e+1,name:"Dialogue "+(Number(e)+1),character:null,description:"",hiddenInfo:[],choices:[]};m([].concat(dn(u),[n]))},children:[(0,Z.jsx)(V.I,{iconType:Y.AT.PLUS})," Create dialogue"]}),(0,Z.jsxs)(E.$,{onClick:function(){var e={id:Math.trunc(Date.now()+Math.random()),name:"New Skill Test",skillID:"",difficulties:[],nextDialogueID:null};y([].concat(dn(c),[e]))},children:[(0,Z.jsx)(V.I,{iconType:Y.AT.PLUS})," Create skill test"]})]}),(0,Z.jsx)(sn,{children:(0,Z.jsx)(I,{dialogues:u,skillTests:c,nodeCoordinates:s,onDialogueClick:function(e){var n,t,r=null!==(n=u.find((function(n){return n.id===e})))&&void 0!==n?n:null,i=null!==(t=c.find((function(n){return n.id===e})))&&void 0!==t?t:null;if(r||i){if(r&&i)throw new Error("Cannot have two nodes with the same ID!");g(r),S(i)}},onDialogueMoveFinish:function(e,n,t){p(new Map(s.set(e,{x:n,y:t})))}})})]}),(0,Z.jsx)("hr",{className:"divider"}),(0,Z.jsx)(Ne,{dialogues:u,currentDialogue:v,setDialogues:m,setCurrentDialogue:g}),(0,Z.jsx)(en,{skillTests:c,currentSkillTest:j,setSkillTests:y,setCurrentSkillTest:S})]})]})})}},2283:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1601),i=t.n(r),o=t(6314),l=t.n(o)()(i());l.push([e.id,".choices-table {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;\n    align-items: center;\n\n    gap: 20px;\n}\n\n.choices-table__header {\n    font-weight: 700;\n}\n\n.choices-table__item--actions {\n    display: flex;\n    flex-direction: row;\n    gap: 8px;\n\n    justify-content: end;\n}\n",""]);const a=l},3954:(e,n,t)=>{t.d(n,{y:()=>a});var r=t(6540),i=t(9794);function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,a=[],u=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw i}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return l(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var a=function(){var e=o((0,r.useState)("tree_1"),2),n=e[0],t=e[1],l=o((0,r.useState)("Tree 1"),2),a=l[0],u=l[1],c=o((0,r.useState)([]),2),s=c[0],d=c[1],f=o((0,r.useState)([]),2),m=f[0],y=f[1],p=o((0,r.useState)(new Map),2),h=p[0],v=p[1];return(0,r.useEffect)((function(){var e,n=localStorage.getItem("dialogueTree");if(n){var r=JSON.parse(n),o=(0,i.T)(r);o&&(t(o.id),u(o.name),d(o.dialogues),y(null!==(e=o.skillTests)&&void 0!==e?e:[]),v(o.nodeCoordinates))}}),[]),(0,r.useEffect)((function(){var e={id:n,name:a,dialogues:s,skillTests:m,nodeCoordinates:Array.from(h.entries())},t=JSON.stringify(e);localStorage.setItem("dialogueTree",t)}),[n,a,s,m,h]),{dialogueTreeID:n,dialogueTreeName:a,dialogues:s,skillTests:m,nodeCoordinates:h,setDialogues:d,setSkillTests:y,setDialogueTreeID:t,setDialogueTreeName:u,setDialogueCoordinates:v}}},4857:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1601),i=t.n(r),o=t(6314),l=t.n(o)()(i());l.push([e.id,"\n.hidden-info-item {\n    display: flex;\n    flex-direction: row;\n\n    gap: 12px;\n}\n\n.hidden-info-item__segment {\n    display: flex;\n    flex-direction: row;\n\n    flex: 1 1;\n}\n\n.hidden-info-item__segment--actions {\n    display: flex;\n    flex-direction: row;\n    justify-content: end;\n\n    gap: 8px;\n    flex: 1 1;\n}\n",""]);const a=l},6640:(e,n,t)=>{t.d(n,{Y:()=>i});var r=t(3628),i=[{label:"Dialogue Tree",route:"/rpg_tools/dialogue_tree",iconType:r.AT.GRAPH4},{label:"Characters",route:"/rpg_tools/characters",iconType:r.AT.GROUP},{label:"Preview",route:"/rpg_tools/tree_preview",iconType:r.AT.MENU_BOOK}]},6793:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1601),i=t.n(r),o=t(6314),l=t.n(o)()(i());l.push([e.id,".skill-test-maker__title {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: 20px;\n}\n\n.skill-test-maker__form {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: 20px;\n\n    margin-bottom: 20px;\n}\n\n.skill-test-maker__outcome-item {\n    display: flex;\n    flex-direction: row;\n    justify-content: start;\n}\n\n.skill-test-maker__outcome-item-child {\n    flex: 1 1;\n}\n\n.skill-test-maker__outcome-item-child--controls {\n    display: flex;\n    flex-direction: row;\n    justify-content: end;\n    gap: 8px;\n\n    flex: 1 1;\n}\n\n@media only screen and (max-width: 600px) {\n    .skill-test-maker__title {\n        justify-content: center;\n    }\n}\n",""]);const a=l},6966:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1601),i=t.n(r),o=t(6314),l=t.n(o)()(i());l.push([e.id,"\n.dialogue-tree-maker {\n    width: 100%;\n    margin-bottom: 100px;\n}\n\n.dialogue-tree-maker__title {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    flex-wrap: wrap;\n\n    margin-bottom: 24px;\n    gap: 20px;\n}\n\n.dialogue-tree-maker__form {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: 20px;\n\n    margin-bottom: 24px;\n}\n\n.dialogue-tree-maker__top--characters {\n    flex: 1;\n}\n\n.dialogue-tree-maker--content {\n    display: flex;\n    flex-direction: column;\n\n    gap: 28px;\n}\n\n.dialogue-tree-maker__dialogue-tree-title {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n\n    gap: 20px;\n}\n\n@media only screen and (max-width: 600px) {\n    .dialogue-tree-maker__title {\n        justify-content: center;\n    }\n\n    .dialogue-tree-maker__dialogue-tree-title {\n        justify-content: center;\n        margin-bottom: 20px;\n    }\n}\n",""]);const a=l},7739:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1601),i=t.n(r),o=t(6314),l=t.n(o)()(i());l.push([e.id,".choice-modal {\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n.choice-modal__inline-form {\n    display: flex;\n    flex-direction: row;\n    gap: 20px;\n}\n\n.choice-modal__condition-outcome-form {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr;\n    gap: 8px;\n}\n\n.choice-modal__condition-outcome-form-button {\n    align-self: end;\n}\n\n.choice-modal__condition-outcome {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr;\n    gap: 20px;\n}\n\n.choice-modal__condition-outcome-header {\n    font-weight: 700;\n}\n\n.choice-modal__condition-outcome-actions {\n    display: flex;\n    flex-direction: row;\n    gap: 8px;\n    justify-content: end;\n}\n",""]);const a=l},8012:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1601),i=t.n(r),o=t(6314),l=t.n(o)()(i());l.push([e.id,".dialogue-maker {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    gap: 16px;\n}\n\n.dialogue-maker__title {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    flex-wrap: wrap;\n\n    gap: 20px;\n}\n\n.dialogue-maker__form {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    \n    gap: 20px;\n}\n\n.dialogue-maker__content {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n}\n\n.dialogue-maker__description {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.dialogue-maker__description--hidden-info {\n    display: flex;\n    flex-direction: column;\n\n    gap: 12px;\n}\n\n.dialogue-maker__text-area-container {\n    display: flex;\n    flex-direction: column;\n\n    padding: 20px;\n\n    border-radius: 8px;\n    box-shadow: 1px 1px 4px #1f2028;\n\n    background-color: #313137;\n}\n\n.dialogue-maker__text-area {\n    height: 140px;\n    resize: vertical;\n\n    padding: 4px 4px;\n    box-shadow: 1px 1px 4px #1f2028;\n}\n\n.dialogue-maker__widgets {\n    display: flex;\n    flex-direction: row;\n    gap: 20px;\n\n    justify-content: space-between;\n}\n\n.dialogue-maker__widgets--choices {\n    flex: 1;\n}\n",""]);const a=l},8014:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1601),i=t.n(r),o=t(6314),l=t.n(o)()(i());l.push([e.id,".skill-test-difficulty-modal-outcome__form {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    gap: 20px;\n\n    margin: 20px 0;\n}\n\n.skill-test-difficulty-modal__condition-outcome {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    margin-bottom: 4px;\n}\n",""]);const a=l},8047:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(1601),i=t.n(r),o=t(6314),l=t.n(o)()(i());l.push([e.id,".add-hidden-info-modal {\n    display: flex;\n    flex-direction: column;\n\n    gap: 8px;\n}\n\n.add-hidden-info-modal__form {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n\n    gap: 8px;\n}\n\n.add-hidden-info-modal__description {\n    height: 230px;\n\n    overflow-y: scroll;\n    overflow-x: hidden;\n    scrollbar-width: none;\n}\n\n.choices-list__container::-webkit-scrollbar {\n    display: none;\n}",""]);const a=l},9794:(e,n,t)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n,t){return(n=function(e){var n=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,{T:()=>a});var a=function(e){if(Array.isArray(e))return null;var n=u(e);if(!n)return null;var t=c(e),r=s(e),i=Array.isArray(e.nodeCoordinates)?new Map(e.nodeCoordinates):new Map;return o(o({},n),{},{dialogues:null!=t?t:[],skillTests:null!=r?r:[],nodeCoordinates:i})},u=function(e){return"string"==typeof e.id&&"string"==typeof e.name?{id:e.id,name:e.name}:null},c=function(e){if(!Array.isArray(e.dialogues))return null;var n=e.dialogues;return n.every((function(e){return!("number"!=typeof e.id||"string"!=typeof e.name||"string"!=typeof e.description||!Array.isArray(e.hiddenInfo)||!Array.isArray(e.choices))}))?n:null},s=function(e){if(!Array.isArray(e.skillTests))return null;var n=e.skillTests;return n.every((function(e){return!("number"!=typeof e.id||"string"!=typeof e.name||"string"!=typeof e.skillID||!Array.isArray(e.difficulties)||"number"!=typeof e.nextDialogueID&&null!==e.nextDialogueID)}))?n:null}}}]);